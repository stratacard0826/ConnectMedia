if("undefined"==typeof jQuery)throw new Error("jquery-confirm requires jQuery");var jconfirm,Jconfirm;!function(t){"use strict";t.fn.confirm=function(n,i){return"undefined"==typeof n&&(n={}),"string"==typeof n&&(n={content:n,title:i?i:!1}),t(this).each(function(){var i=t(this);i.on("click",function(e){e.preventDefault();var o=t.extend({},n);i.attr("data-title")&&(o.title=i.attr("data-title")),i.attr("data-content")&&(o.content=i.attr("data-content")),o.$target=i,i.attr("href")&&!n.confirm&&(o.confirm=function(){location.href=i.attr("href")}),t.confirm(o)})}),t(this)},t.confirm=function(t,n){return"undefined"==typeof t&&(t={}),"string"==typeof t&&(t={content:t,title:n?n:!1}),jconfirm(t)},t.alert=function(t,n){return"undefined"==typeof t&&(t={}),"string"==typeof t&&(t={content:t,title:n?n:!1}),t.cancelButton=!1,jconfirm(t)},t.dialog=function(t,n){return"undefined"==typeof t&&(t={}),"string"==typeof t&&(t={content:t,title:n?n:!1}),t.cancelButton=!1,t.confirmButton=!1,t.confirmKeys=[13],jconfirm(t)},jconfirm=function(n){"undefined"==typeof n&&(n={}),jconfirm.defaults&&t.extend(jconfirm.pluginDefaults,jconfirm.defaults);var n=t.extend({},jconfirm.pluginDefaults,n);return new Jconfirm(n)},Jconfirm=function(n){t.extend(this,n),this._init()},Jconfirm.prototype={_init:function(){var t=this;this._rand=Math.round(99999*Math.random()),this._buildHTML(),this._bindEvents(),setTimeout(function(){t.open(),t._watchContent()},0)},_buildHTML:function(){var n=this;this.animation="anim-"+this.animation.toLowerCase(),this.closeAnimation="anim-"+this.closeAnimation.toLowerCase(),this.theme="jconfirm-"+this.theme.toLowerCase(),"anim-none"==this.animation&&(this.animationSpeed=0),this._lastFocused=t("body").find(":focus"),this.$el=t(this.template).appendTo(this.container).addClass(this.theme),this.$el.find(".jconfirm-box-container").addClass(this.columnClass),this.$el.find(".jconfirm-bg").css(this._getCSS(this.animationSpeed,1)),this.$el.find(".jconfirm-bg").css("opacity",this.opacity),this.$b=this.$el.find(".jconfirm-box").css(this._getCSS(this.animationSpeed,this.animationBounce)).addClass(this.animation),this.$body=this.$b,this.rtl&&this.$el.addClass("rtl"),this._contentReady=t.Deferred(),this._modalReady=t.Deferred(),this.$title=this.$el.find(".title"),this.contentDiv=this.$el.find("div.content"),this.$content=this.contentDiv,this.$contentPane=this.$el.find(".content-pane"),this.$icon=this.$el.find(".icon-c"),this.$closeIcon=this.$el.find(".closeIcon"),this.$contentPane.css(this._getCSS(this.animationSpeed,1)),this.setTitle(),this.setIcon(),this._setButtons(),this.closeIconClass&&this.$closeIcon.html('<i class="'+this.closeIconClass+'"></i>'),n._contentHash=this._hash(n.$content.html()),t.when(this._contentReady,this._modalReady).then(function(){console.log("ready"),n.setContent(),n.setTitle(),n.setIcon()}),this._getContent(),this._imagesLoaded(),this.autoClose&&this._startCountDown()},_unwatchContent:function(){clearInterval(this._timer)},_hash:function(){return btoa(encodeURIComponent(this.$content.html()))},_watchContent:function(){var t=this;this._timer=setInterval(function(){var n=t._hash(t.$content.html());t._contentHash!=n&&(t._contentHash=n,t.setDialogCenter(),t._imagesLoaded())},this.watchInterval)},_bindEvents:function(){var n=this,i=!1;this.$el.find(".jconfirm-scrollpane").click(function(t){i||(n.backgroundDismiss?(n.cancel(),n.close()):(n.$b.addClass("hilight"),setTimeout(function(){n.$b.removeClass("hilight")},800))),i=!1}),this.$el.find(".jconfirm-box").click(function(t){i=!0}),this.$confirmButton&&this.$confirmButton.click(function(t){t.preventDefault();var i=n.confirm(n.$b);n._stopCountDown(),n.onAction("confirm"),("undefined"==typeof i||i)&&n.close()}),this.$cancelButton&&this.$cancelButton.click(function(t){t.preventDefault();var i=n.cancel(n.$b);n._stopCountDown(),n.onAction("cancel"),("undefined"==typeof i||i)&&n.close()}),this.$closeButton&&this.$closeButton.click(function(t){t.preventDefault(),n._stopCountDown(),n.cancel(),n.onAction("close"),n.close()}),this.keyboardEnabled&&setTimeout(function(){t(window).on("keyup."+this._rand,function(t){n.reactOnKey(t)})},500),t(window).on("resize."+this._rand,function(){n.setDialogCenter(!0)})},_getCSS:function(t,n){return{"-webkit-transition-duration":t/1e3+"s","transition-duration":t/1e3+"s","-webkit-transition-timing-function":"cubic-bezier(.36,1.1,.2, "+n+")","transition-timing-function":"cubic-bezier(.36,1.1,.2, "+n+")"}},_imagesLoaded:function(){var n=this;t.each(this.$content.find("img:not(.loaded)"),function(i,e){var o=setInterval(function(){var i=t(e).css("height");console.log(i),"0px"!==i&&(t(e).addClass("loaded"),n.setDialogCenter(),clearInterval(o))},40)})},_setButtons:function(){this.$btnc=this.$el.find(".buttons"),this.confirmButton&&""!==t.trim(this.confirmButton)&&(this.$confirmButton=t('<button type="button" class="btn">'+this.confirmButton+"</button>").appendTo(this.$btnc).addClass(this.confirmButtonClass)),this.cancelButton&&""!==t.trim(this.cancelButton)&&(this.$cancelButton=t('<button type="button" class="btn">'+this.cancelButton+"</button>").appendTo(this.$btnc).addClass(this.cancelButtonClass)),this.confirmButton||this.cancelButton||this.$btnc.hide(),this.confirmButton||this.cancelButton||null!==this.closeIcon||(this.$closeButton=this.$b.find(".closeIcon").show()),this.closeIcon===!0&&(this.$closeButton=this.$b.find(".closeIcon").show())},setTitle:function(t){this.title="undefined"!=typeof t?t:this.title,this.$title.html(this.title||"")},setIcon:function(t){this.title="undefined"!=typeof string?t:this.title,this.$icon.html(this.icon?'<i class="'+this.icon+'"></i>':"")},setContent:function(t){this.content="undefined"==typeof t?this.content:t,""==this.content?(this.$content.html(this.content),this.$contentPane.hide()):(this.$content.html(this.content),this.$contentPane.show()),this.$content.hasClass("loading")&&(this.$content.removeClass("loading"),this.$btnc.find("button").prop("disabled",!1))},_getContent:function(n){var i=this;if(n=n?n:this.content,this._isAjax=!1,this.content)if("string"==typeof this.content)if("url:"===this.content.substr(0,4).toLowerCase()){this._isAjax=!0,this.$content.addClass("loading"),this.$btnc.find("button").prop("disabled",!0);var e=this.content.substring(4,this.content.length);t.get(e).done(function(t){i.content=t,i._contentReady.resolve()}).always(function(t,n,e){"function"==typeof i.contentLoaded&&i.contentLoaded(t,n,e)})}else this.setContent(this.content),this._contentReady.reject();else if("function"==typeof this.content){this.$content.addClass("loading"),this.$btnc.find("button").attr("disabled","disabled");var o=this.content(this);"object"!=typeof o?console.error("The content function must return jquery promise."):"function"!=typeof o.always?console.error("The object returned is not a jquery promise."):(this._isAjax=!0,o.always(function(t,n){i._contentReady.resolve()}))}else console.error("Invalid option for property content, passed: "+typeof this.content);else this.content="",this.setContent(this.content),this._contentReady.reject();this.setDialogCenter()},_stopCountDown:function(){clearInterval(this.timerInterval),this.$cd&&this.$cd.remove()},_startCountDown:function(){var n=this.autoClose.split("|");if(/cancel/.test(n[0])&&"alert"===this.type)return!1;if(/confirm|cancel/.test(n[0])){this.$cd=t('<span class="countdown">').appendTo(this["$"+n[0]+"Button"]);var i=this;i.$cd.parent().click();var e=n[1]/1e3;this.timerInterval=setInterval(function(){i.$cd.html(" ("+(e-=1)+")"),0===e&&(i.$cd.html(""),i.$cd.parent().trigger("click"),clearInterval(i.timerInterval))},1e3)}else console.error("Invalid option "+n[0]+", must be confirm/cancel")},reactOnKey:function n(i){var e=t(".jconfirm");if(e.eq(e.length-1)[0]!==this.$el[0])return!1;var n=i.which;return this.contentDiv.find(":input").is(":focus")&&/13|32/.test(n)?!1:(-1!==t.inArray(n,this.cancelKeys)&&(this.$cancelButton?this.$cancelButton.click():this.close()),void(-1!==t.inArray(n,this.confirmKeys)&&this.$confirmButton&&this.$confirmButton.click()))},setDialogCenter:function(){if(console.log("setting dialog to center"),"none"==this.$contentPane.css("display"))var n=0,i=0;else{var n=this.$content.outerHeight(),i=this.$contentPane.height();0==i&&(i=n)}var e=100,o=this.$content.outerWidth();this.$content.css({clip:"rect(0px "+(e+o)+"px "+n+"px -"+e+"px)"}),this.$contentPane.css({height:n});var s=t(window).height(),c=this.$b.outerHeight()-i+n,a=(s-c)/2,r=100;if(c>s-r){var l={"margin-top":r/2,"margin-bottom":r/2};t("body").addClass("jconfirm-noscroll")}else{var l={"margin-top":a};t("body").removeClass("jconfirm-noscroll")}this.$b.css(l)},close:function(){var n=this;if(this.isClosed())return!1;"function"==typeof this.onClose&&this.onClose(),this._unwatchContent(),n._lastFocused.focus(),t(window).unbind("resize."+this._rand),this.keyboardEnabled&&t(window).unbind("keyup."+this._rand),n.$el.find(".jconfirm-bg").removeClass("seen"),t("body").removeClass("jconfirm-noscroll"),this.$b.addClass(this.closeAnimation);var i="anim-none"==this.closeAnimation?0:this.animationSpeed;return setTimeout(function(){n.$el.remove()},25*i/100),jconfirm.record.closed+=1,jconfirm.record.currentlyOpen-=1,!0},open:function(){var t=this;if(this.isClosed())return!1;t.$el.find(".jconfirm-bg").addClass("seen"),this.$b.removeClass(this.animation),this.$b.find("input[autofocus]:visible:first").focus(),jconfirm.record.opened+=1,jconfirm.record.currentlyOpen+=1,"function"==typeof this.onOpen&&this.onOpen();var n="jconfirm-box"+this._rand;return this.$b.attr("aria-labelledby",n).attr("tabindex",-1).focus(),this.$title?this.$title.attr("id",n):this.$content&&this.$content.attr("id",n),setTimeout(function(){t.$b.css({"transition-property":t.$b.css("transition-property")+", margin"}),t._modalReady.resolve()},this.animationSpeed),!0},isClosed:function(){return""===this.$el.css("display")}},jconfirm.pluginDefaults={template:'<div class="jconfirm"><div class="jconfirm-bg"></div><div class="jconfirm-scrollpane"><div class="container"><div class="row"><div class="jconfirm-box-container"><div class="jconfirm-box" role="dialog" aria-labelledby="labelled" tabindex="-1"><div class="closeIcon">&times;</div><div class="title-c"><span class="icon-c"></span><span class="title"></span></div><div class="content-pane"><div class="content"></div></div><div class="buttons"></div><div class="jquery-clear"></div></div></div></div></div></div></div>',title:"Hello",content:"Are you sure to continue?",contentLoaded:function(){},icon:"",opacity:.2,confirmButton:"Okay",cancelButton:"Close",confirmButtonClass:"btn-default",cancelButtonClass:"btn-default",theme:"white",animation:"zoom",closeAnimation:"scale",animationSpeed:500,animationBounce:1.2,keyboardEnabled:!1,rtl:!1,confirmKeys:[13],cancelKeys:[27],container:"body",confirm:function(){},cancel:function(){},backgroundDismiss:!1,autoClose:!1,closeIcon:null,closeIconClass:!1,watchInterval:100,columnClass:"col-md-4 col-md-offset-4 col-sm-6 col-sm-offset-3 col-xs-10 col-xs-offset-1",onOpen:function(){},onClose:function(){},onAction:function(){}},jconfirm.record={opened:0,closed:0,currentlyOpen:0}}(jQuery);